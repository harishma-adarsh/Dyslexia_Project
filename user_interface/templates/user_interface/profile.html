{% extends 'user_interface/base.html' %}

{% block title %}Profile - Dyslexia Helper{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card mb-4">
            <div class="card-body text-center">
                <h2><span class="emoji">ðŸ‘¤</span> Your Profile</h2>
                <p class="lead">Manage your account information and preferences</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h4><i class="fas fa-user-edit"></i> Profile Information</h4>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="username" class="form-label">
                                    <i class="fas fa-user"></i> Username
                                </label>
                                <input type="text" class="form-control" value="{{ user.username }}" readonly>
                                <small class="form-text text-muted">Username cannot be changed</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="email" class="form-label">
                                    <i class="fas fa-envelope"></i> Email
                                </label>
                                <input type="email" class="form-control" value="{{ user.email }}" readonly>
                                <small class="form-text text-muted">Email cannot be changed</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="age" class="form-label">
                                    <i class="fas fa-birthday-cake"></i> Age
                                </label>
                                <input type="number" class="form-control" name="age" id="age" 
                                       value="{{ profile.age }}" min="5" max="18" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="grade_level" class="form-label">
                                    <i class="fas fa-graduation-cap"></i> Grade Level
                                </label>
                                <select class="form-control" name="grade_level" id="grade_level" required>
                                    <option value="Kindergarten" {% if profile.grade_level == 'Kindergarten' %}selected{% endif %}>Kindergarten</option>
                                    <option value="1st" {% if profile.grade_level == '1st' %}selected{% endif %}>1st Grade</option>
                                    <option value="2nd" {% if profile.grade_level == '2nd' %}selected{% endif %}>2nd Grade</option>
                                    <option value="3rd" {% if profile.grade_level == '3rd' %}selected{% endif %}>3rd Grade</option>
                                    <option value="4th" {% if profile.grade_level == '4th' %}selected{% endif %}>4th Grade</option>
                                    <option value="5th" {% if profile.grade_level == '5th' %}selected{% endif %}>5th Grade</option>
                                    <option value="6th" {% if profile.grade_level == '6th' %}selected{% endif %}>6th Grade</option>
                                    <option value="7th" {% if profile.grade_level == '7th' %}selected{% endif %}>7th Grade</option>
                                    <option value="8th" {% if profile.grade_level == '8th' %}selected{% endif %}>8th Grade</option>
                                    <option value="9th" {% if profile.grade_level == '9th' %}selected{% endif %}>9th Grade</option>
                                    <option value="10th" {% if profile.grade_level == '10th' %}selected{% endif %}>10th Grade</option>
                                    <option value="11th" {% if profile.grade_level == '11th' %}selected{% endif %}>11th Grade</option>
                                    <option value="12th" {% if profile.grade_level == '12th' %}selected{% endif %}>12th Grade</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="created_at" class="form-label">
                            <i class="fas fa-calendar"></i> Member Since
                        </label>
                        <input type="text" class="form-control" value="{{ profile.created_at|date:'F d, Y' }}" readonly>
                    </div>
                    
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-chart-pie"></i> Quick Stats</h5>
            </div>
            <div class="card-body">
                <div class="stat-item mb-3">
                    <div class="d-flex justify-content-between">
                        <span><i class="fas fa-upload text-primary"></i> Samples Uploaded</span>
                        <span class="fw-bold">{{ user.handwritingsample_set.count|add:user.speechsample_set.count }}</span>
                    </div>
                </div>
                <div class="stat-item mb-3">
                    <div class="d-flex justify-content-between">
                        <span><i class="fas fa-brain text-success"></i> Analyses Run</span>
                        <span class="fw-bold">{{ user.detectionresult_set.count }}</span>
                    </div>
                </div>
                <div class="stat-item mb-3">
                    <div class="d-flex justify-content-between">
                        <span><i class="fas fa-gamepad text-warning"></i> Exercises Completed</span>
                        <span class="fw-bold">{{ user.exercisesession_set.count }}</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="d-flex justify-content-between">
                        <span><i class="fas fa-clock text-info"></i> Time Practiced</span>
                        <span class="fw-bold">{{ user.exercisesession_set.aggregate.total_time|default:0 }} min</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-trophy"></i> Recent Achievements</h5>
            </div>
            <div class="card-body">
                <div class="achievement-item mb-3">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-star text-warning fa-2x me-3"></i>
                        <div>
                            <h6 class="mb-0">First Upload</h6>
                            <small class="text-muted">You uploaded your first sample!</small>
                        </div>
                    </div>
                </div>
                
                <div class="achievement-item mb-3">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-brain text-success fa-2x me-3"></i>
                        <div>
                            <h6 class="mb-0">Analysis Complete</h6>
                            <small class="text-muted">You completed your first analysis!</small>
                        </div>
                    </div>
                </div>
                
                <div class="achievement-item">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-gamepad text-primary fa-2x me-3"></i>
                        <div>
                            <h6 class="mb-0">Exercise Master</h6>
                            <small class="text-muted">Keep practicing to unlock more achievements!</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h4><span class="emoji">ðŸŽ¯</span> Learning Goals</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="goal-card text-center">
                            <div class="feature-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <h6>Reading Goals</h6>
                            <p>Improve reading fluency and comprehension</p>
                            <div class="progress mb-2">
                                <div class="progress-bar bg-primary" style="width: 60%"></div>
                            </div>
                            <small class="text-muted">60% Complete</small>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="goal-card text-center">
                            <div class="feature-icon">
                                <i class="fas fa-pencil-alt"></i>
                            </div>
                            <h6>Writing Goals</h6>
                            <p>Enhance handwriting and creative writing</p>
                            <div class="progress mb-2">
                                <div class="progress-bar bg-success" style="width: 40%"></div>
                            </div>
                            <small class="text-muted">40% Complete</small>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="goal-card text-center">
                            <div class="feature-icon">
                                <i class="fas fa-microphone"></i>
                            </div>
                            <h6>Speech Goals</h6>
                            <p>Develop pronunciation and fluency</p>
                            <div class="progress mb-2">
                                <div class="progress-bar bg-info" style="width: 75%"></div>
                            </div>
                            <small class="text-muted">75% Complete</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-body text-center">
                <h4><span class="emoji">ðŸ’¡</span> Tips for Success</h4>
                <div class="row">
                    <div class="col-md-3">
                        <div class="tip-item">
                            <i class="fas fa-clock fa-2x text-primary mb-2"></i>
                            <h6>Practice Daily</h6>
                            <p>Even 15 minutes a day makes a big difference!</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="tip-item">
                            <i class="fas fa-heart fa-2x text-danger mb-2"></i>
                            <h6>Stay Positive</h6>
                            <p>Learning takes time - be patient with yourself!</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="tip-item">
                            <i class="fas fa-users fa-2x text-success mb-2"></i>
                            <h6>Ask for Help</h6>
                            <p>Don't hesitate to ask teachers or parents for support!</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="tip-item">
                            <i class="fas fa-trophy fa-2x text-warning mb-2"></i>
                            <h6>Celebrate Progress</h6>
                            <p>Every small improvement is worth celebrating!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<style>
.stat-item {
    padding: 0.5rem 0;
    border-bottom: 1px solid #e9ecef;
}

.stat-item:last-child {
    border-bottom: none;
}

.achievement-item {
    border-left: 4px solid #28a745;
    padding-left: 1rem;
}

.goal-card {
    padding: 1rem;
    border: 1px solid #e9ecef;
    border-radius: 10px;
    height: 100%;
}

.tip-item {
    padding: 1rem;
}
</style>
{% endblock %}
